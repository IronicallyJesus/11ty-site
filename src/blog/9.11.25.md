---
title: "Custom Docker containers in CML!"
date: "2025-09-08"
layout: "post.njk"
permalink: /blog/{{ title | slugify }}/
tags: ["blog", "docker", "cml", "cisco modeling labs"]
description: "This will show you how to import almost any Docker container into Cisco Modeling Labs."
excerpt: "Use almost any Docker container in CML!"
sitemapPriority: 0.5
sitemapChangefreq: "monthly"
image: "/assets/images/8.30.25/11ty.webp"
---

![Banner Image]({{ image }}#center)
<br/>
[Cisco Modeling Labs](https://www.cisco.com/site/us/en/learn/training-certifications/training/modeling-labs/index.html) (CML) recently added support for Docker containers and you can imagine the possibilities that has opened up. Version 2.9 comes with some pretty cool baked in images like TACPlus, FreeRadius, and even a Dnsmasq server! What if you want to run your own docker image though? Like this website for example??

## What you need

1. An instance of CML running, duh
2. A Docker image you'd like to import

## Prepping the Docker image

Lets assume you have either built your own image or downloaded one from a repo. Either way we will need to bundle it up to use in CML. 
<br>

1. First lets see what images we have locally. Run `docker image ls` to verify your image is downloaded and ready.
{%- command "jesus", "desktop", "2-4" -%}
docker image ls
REPOSITORY                      TAG               IMAGE ID       CREATED        SIZE
git.twk95.com/twk95/11ty-site   latest            11b0c9d9ec70   8 hours ago    131MB
moby/buildkit                   buildx-stable-1   44f5d48d5c6c   2 months ago   219MB
{%- endcommand -%}
<br>

2. Use the `docker save` command to archive the image for CML. We'll be using my `twk95/11ty-site` image for this example.
{%- command "jesus", "desktop", "3" -%}
docker save -o jesus.twk95.com.tar git.twk95.com/twk95/11ty-site:latest 
ls
jesus.twk95.com.tar
{%- endcommand -%}
<br>

3. Before we leave the terminal we have to grab one more thing. Run `docker image inspect` to output the image's checksum. Keep this handy as we'll need it in CML
{%- command "jesus", "desktop", "2" -%}
docker image inspect -f '{{ "{{" }} index .Id {{ "}}" }}' git.twk95.com/twk95/11ty-site:latest 
sha256:11b0c9d9ec70cb97832fa98029cf0e3548466760646d7431c19a4cc427bc83e0
{%- endcommand %}
<br>

## CML setup

Before we can upload our image we will need to create a node definition.
<br>

### Node definition

In CML, click on `Tools > Node and Image Definitions`. You have the option of adding a new node definition or importing one from a yaml file. If this is your first time creating a node definition I recommend exporting an existing definition and updating it for your own use. I have provided the yaml file for my node definition below. 
<br>

### Image definition

Go back to the `Node and Image Definitions` section. This time under the `Image definitions` button hit `Manage`. Here we will upload the .tar file we just created. I'm running WSL2 so it is easy enough to open the linux folder in Windows and upload it to CML. When it's finished click `Create new image definition`.
<br>
<br>

Here you will need to enter the ID, Label, Node Definition, Disk Image, and Disk Hash. For the Node Definition your new node will be at the bottom. Select your recently uploaded disk image in the appropriate field and enter the hash you got from the steps before.

### 